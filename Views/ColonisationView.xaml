<UserControl x:Class="ODEliteTracker.Views.ColonisationView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:ODEliteTracker.Views"
             xmlns:viewmodels="clr-namespace:ODEliteTracker.ViewModels"
             xmlns:busyIndicator="https://github.com/moh3ngolshani/BusyIndicator"
             xmlns:wpfconverters="clr-namespace:ODEliteTracker.WPFConverters"
             xmlns:buttons="clr-namespace:ODEliteTracker.Controls.Buttons"
             xmlns:colonisation="clr-namespace:ODEliteTracker.Controls.Colonisation"
             xmlns:colonisationModel="clr-namespace:ODEliteTracker.Models.Colonisation.Builds"
             xmlns:colonisationVM="clr-namespace:ODEliteTracker.ViewModels.ModelViews.Colonisation"
             xmlns:models="clr-namespace:ODEliteTracker.Models"
             xmlns:helpers="clr-namespace:ODEliteTracker.Helpers"
             xmlns:popouts="clr-namespace:ODEliteTracker.ViewModels.PopOuts"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             d:DataContext="{d:DesignInstance viewmodels:ColonisationViewModel}"
             mc:Ignorable="d"
             x:Name="Root"
             d:DesignHeight="1920"
             d:DesignWidth="1080">
    <busyIndicator:BusyMask x:Name="BusyIndicator"
                            IsBusy="{Binding IsBusy}"
                            Background="{DynamicResource IndicatorBackground}"
                            FontSize="30"
                            Height="Auto"
                            BusyContent="Parsing Colonisation Logs"
                            IndicatorType="Cupertino"
                            BusyContentMargin="0,20,0,0">
        <Grid TextBlock.FontSize="18"
              Height="Auto">
            <Grid Height="Auto">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="400" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <Grid Height="Auto">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="300" />
                    </Grid.RowDefinitions>

                    <TabControl BorderThickness="0"
                                SelectedIndex="{Binding TabIndex, Mode=TwoWay}"
                                Background="{DynamicResource CardBackground}"
                                FontSize="18"
                                Margin="5"
                                Padding="5">
                        <TabItem Header="Active">
                            <colonisation:DepotList Depots="{Binding ActiveDepots}"
                                                    SelectedDepot="{Binding SelectedDepot}"
                                                    SelectDepotCommand="{Binding SetSelectedDepotCommand}" />
                        </TabItem>
                        <TabItem Header="Inactive">
                            <colonisation:DepotList Depots="{Binding InactiveDepots}"
                                                    SelectedDepot="{Binding SelectedDepot}"
                                                    SelectDepotCommand="{Binding SetSelectedDepotCommand}" />
                        </TabItem>
                        <TabItem Header="Your Systems">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition />
                                </Grid.RowDefinitions>

                                <ListBox ItemsSource="{Binding CommanderSystems}"
                                         ScrollViewer.VerticalScrollBarVisibility="Visible"
                                         ScrollViewer.HorizontalScrollBarVisibility="Visible"
                                         SelectedItem="{Binding SelectedCommanderSystem}"
                                         Background="Transparent"
                                         BorderThickness="0"
                                         Foreground="{DynamicResource PrimaryForeground}">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Grid>
                                                <Button FontSize="20"
                                                        Margin="5,0"
                                                        Tag="1"
                                                        Style="{DynamicResource EliteStyleButton}"
                                                        HorizontalContentAlignment="Left"
                                                        Command="{Binding ElementName=Root, Path=DataContext.SetSelectedCommanderSystemCommand}"
                                                        CommandParameter="{Binding }"
                                                        Grid.Column="0">
                                                    <TextBlock Text="{Binding SystemNameUpper}"
                                                               FontWeight="SemiBold"
                                                               Margin="10,5" />
                                                </Button>
                                            </Grid>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>

                                <ListBox ItemsSource="{Binding SelectedCommanderSystem.Depots}"
                                         Grid.Row="1"
                                         ScrollViewer.VerticalScrollBarVisibility="Visible"
                                         ScrollViewer.HorizontalScrollBarVisibility="Visible"
                                         SelectedItem="{Binding SelectedDepot}"
                                         Background="Transparent"
                                         BorderThickness="0"
                                         Foreground="{DynamicResource PrimaryForeground}">
                                    <ListBox.ItemTemplate>
                                        <DataTemplate>
                                            <Grid>
                                                <Button FontSize="20"
                                                        Margin="5,0"
                                                        Tag="1"
                                                        Style="{DynamicResource EliteStyleButton}"
                                                        HorizontalContentAlignment="Stretch"
                                                        Command="{Binding ElementName=Root, Path=DataContext.SetSelectedDepotCommand}"
                                                        CommandParameter="{Binding }"
                                                        Grid.Column="0">
                                                    <Grid>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="Auto" />
                                                        </Grid.RowDefinitions>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*" />
                                                            <ColumnDefinition Width="Auto" />
                                                        </Grid.ColumnDefinitions>
                                                        <TextBlock Text="{Binding StationNameSplit}"
                                                                   Grid.Row="1"
                                                                   VerticalAlignment="Center"
                                                                   Margin="10,2,0,2" />

                                                        <Rectangle Fill="{Binding RelativeSource={RelativeSource AncestorType={x:Type Button}}, Path=Foreground}"
                                                                   Grid.Column="1"
                                                                   Grid.RowSpan="2"
                                                                   Margin="2"
                                                                   Width="36"
                                                                   Height="36">
                                                            <Rectangle.OpacityMask>
                                                                <VisualBrush>
                                                                    <VisualBrush.Visual>
                                                                        <Image SnapsToDevicePixels="True">
                                                                            <Image.Style>
                                                                                <Style TargetType="{x:Type Image}">
                                                                                    <Setter Property="Source"
                                                                                            Value="/Assets/Icons/Mega-Ship_Icon.png" />
                                                                                    <Style.Triggers>
                                                                                        <DataTrigger Binding="{Binding PlanetBuild}"
                                                                                                     Value="True">
                                                                                            <Setter Property="Source"
                                                                                                    Value="/Assets/Icons/settlement_pm.png" />
                                                                                        </DataTrigger>
                                                                                    </Style.Triggers>
                                                                                </Style>
                                                                            </Image.Style>
                                                                        </Image>
                                                                    </VisualBrush.Visual>
                                                                </VisualBrush>
                                                            </Rectangle.OpacityMask>
                                                        </Rectangle>
                                                    </Grid>
                                                </Button>
                                            </Grid>
                                        </DataTemplate>
                                    </ListBox.ItemTemplate>
                                </ListBox>
                            </Grid>
                        </TabItem>
                        <TabItem Header="Resource">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="20" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <TextBlock Text="{Binding SelectedResource.LocalName, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                           FontSize="22"
                                           Foreground="{DynamicResource Header}" />
                                <TextBlock Text="{Binding SelectedResource.Category, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                           Grid.Row="1"
                                           FontSize="20"
                                           Foreground="{DynamicResource Header}" />
                                <TextBlock Text="Previously Purchased Locations"
                                           Grid.Row="3"
                                           FontSize="15"
                                           Foreground="{DynamicResource Header}" />
                                <DataGrid ItemsSource="{Binding Purchases, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                          RowStyle="{DynamicResource NoSelectRowStyle}"
                                          CellStyle="{DynamicResource NoSelectCellNoMargin}"
                                          Foreground="{DynamicResource PrimaryForeground}"
                                          Background="Transparent"
                                          FontSize="18"
                                          IsReadOnly="True"
                                          AutoGenerateColumns="False"
                                          GridLinesVisibility="None"
                                          BorderThickness="0"
                                          SelectionMode="Single"
                                          ScrollViewer.HorizontalScrollBarVisibility="Visible"
                                          ScrollViewer.VerticalScrollBarVisibility="Visible"
                                          AlternatingRowBackground="{DynamicResource RowAlternationColour}"
                                          HeadersVisibility="Column"
                                          Grid.Row="4">
                                    <DataGrid.Columns>
                                        <DataGridTemplateColumn Width="30">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <Button Style="{DynamicResource ClipboardBtn}"
                                                            Click="PurchaseGrid_Click">
                                                        <Image Source="/Assets/Icons/Clipboard.png"
                                                               Margin="3" />
                                                    </Button>
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>
                                        <DataGridTemplateColumn Header="Location"
                                                                Width="*"
                                                                HeaderStyle="{DynamicResource DataGridHeaderLeft}">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <StackPanel Background="Transparent">
                                                        <TextBlock Text="{Binding SystemName}" />
                                                        <TextBlock Text="{Binding StationName}" />
                                                    </StackPanel>
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>
                                        <DataGridTemplateColumn Header="Info"
                                                                Width="100"
                                                                HeaderStyle="{DynamicResource DataGridHeaderCenter}">
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <StackPanel Background="Transparent">
                                                        <TextBlock Text="{Binding DistanceString}"
                                                                   HorizontalAlignment="Right" />
                                                        <TextBlock Text="{Binding Price}"
                                                                   HorizontalAlignment="Right" />
                                                    </StackPanel>
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>
                                    </DataGrid.Columns>
                                </DataGrid>
                            </Grid>
                        </TabItem>
                    </TabControl>

                    <Border Background="{DynamicResource CardBackground}"
                            Grid.Row="1"
                            MinHeight="180"
                            CornerRadius="5"
                            Margin="5"
                            Padding="5">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <TextBlock Text="{Binding CurrentShip.Name}"
                                       FontSize="30"
                                       Foreground="{DynamicResource Header}" />

                            <TextBlock Text="{Binding CurrentShip.Ident}"
                                       FontSize="20"
                                       Grid.Row="1" />

                            <TextBlock Text="{Binding CurrentShip.CargoText}"
                                       FontSize="20"
                                       Grid.Row="2" />
                            <TextBlock Text="{Binding CurrentShip.CargoRemaining}"
                                       HorizontalAlignment="Right"
                                       FontSize="20"
                                       Margin="0,0,10,0"
                                       Grid.Row="2" />

                            <DataGrid ItemsSource="{Binding CurrentShip.ShipCargo}"
                                      Grid.Row="3"
                                      Style="{DynamicResource ConstructionResourcesDataGrid}"
                                      RowStyle="{DynamicResource NoSelectRowStyle}"
                                      CellStyle="{DynamicResource NoSelectCellNoMargin}"
                                      Foreground="{DynamicResource PrimaryForeground}"
                                      FontSize="18"
                                      ScrollViewer.HorizontalScrollBarVisibility="Visible"
                                      ScrollViewer.VerticalScrollBarVisibility="Visible"
                                      AlternatingRowBackground="{DynamicResource RowAlternationColour}"
                                      HeadersVisibility="Column"
                                      AutoGenerateColumns="False"
                                      HorizontalAlignment="Center">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Commodity"
                                                        Width="*"
                                                        MinWidth="250"
                                                        HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                        ElementStyle="{DynamicResource DataGridElementLeftMarginBody}"
                                                        Binding="{Binding Name}" />
                                    <DataGridTextColumn Header="Count"
                                                        MinWidth="100"
                                                        HeaderStyle="{DynamicResource DataGridHeaderRight}"
                                                        ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                        Binding="{Binding Count}" />
                                </DataGrid.Columns>
                            </DataGrid>
                        </Grid>
                    </Border>
                </Grid>

                <Grid Grid.Column="1"
                      Height="Auto">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="{Binding ColonisationGridSize[0], Mode=TwoWay}" />
                        <RowDefinition Height="{Binding ColonisationGridSize[1], Mode=TwoWay}" />
                        <RowDefinition Height="{Binding ColonisationGridSize[2], Mode=TwoWay}" />
                    </Grid.RowDefinitions>
                    <Border Background="{DynamicResource CardBackground}"
                            CornerRadius="5"
                            Margin="5,5,5,5"
                            Padding="5">
                        <TabControl SelectedIndex="{Binding SelectedDepotTab}">
                            <TabItem Header="Selected Depot">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <StackPanel Grid.Column="0"
                                                    Orientation="Horizontal">
                                            <TextBlock Text="{Binding SelectedDepot.SystemName}"
                                                       FontSize="30"
                                                       Foreground="{DynamicResource Header}"
                                                       Grid.Column="0" />
                                            <Button Style="{DynamicResource ClipboardBtn}"
                                                    Command="{Binding SetClipboardCommand}"
                                                    CommandParameter="{Binding SelectedDepot.SystemName}"
                                                    Margin="5,0"
                                                    Height="25"
                                                    Width="25">
                                                <Image Source="/Assets/Icons/Clipboard.png"
                                                       Margin="3" />
                                            </Button>
                                        </StackPanel>

                                        <StackPanel Grid.Column="2"
                                                    Orientation="Horizontal"
                                                    HorizontalAlignment="Right"
                                                    VerticalAlignment="Center">
                                            <buttons:ColonisationDiscordButton Text="{Binding DiscordButtonText}"
                                                                               Command="{Binding CreatePostCommand}"
                                                                               Height="30" />

                                            <TextBlock Text="Commodity Sorting "
                                                       VerticalAlignment="Center" />
                                            <ComboBox ItemsSource="{Binding Source={StaticResource CommodityEnum}}"
                                                      SelectedItem="{Binding CommoditySorting}"
                                                      Margin="5,0,10,0"
                                                      Grid.Column="2"
                                                      MinWidth="180"
                                                      FontSize="18"
                                                      HorizontalAlignment="Right"
                                                      VerticalAlignment="Center"
                                                      IsReadOnly="True"
                                                      IsSynchronizedWithCurrentItem="False" />
                                            <Button Command="{Binding OpenPopOut}"
                                                    CommandParameter="{x:Type popouts:ColonisationPopOut}"
                                                    Style="{DynamicResource EliteStyleImageButton}"
                                                    Width="35"
                                                    Margin="5,0"
                                                    Padding="5"
                                                    ToolTip="Open Overlay">
                                                <Image Source="/Assets/Icons/PopOutBtn.png" />
                                            </Button>
                                            <Button Command="{Binding AddShoppingListCommand}"
                                                    CommandParameter="{Binding SelectedDepot}"
                                                    Style="{DynamicResource EliteStyleImageButton}"
                                                    Width="35"
                                                    Margin="0,0,5,0"
                                                    Padding="2,0,0,0"
                                                    ToolTip="Add/Remove From Shopping List">
                                                <Image Source="/Assets/Icons/ShoppingCart.png" />
                                            </Button>
                                            <Button Content="{Binding ActiveButtonText}"
                                                    Command="{Binding SetActiveStateCommand}"
                                                    CommandParameter="{Binding SelectedDepot}"
                                                    Style="{DynamicResource EliteStyleButton}"
                                                    Width="120"
                                                    Height="35"
                                                    Grid.ColumnSpan="2"
                                                    FontSize="20" />
                                        </StackPanel>
                                        <TextBlock Text="{Binding SelectedDepot.StationNameSplit}"
                                                   Grid.ColumnSpan="2"
                                                   FontSize="20"
                                                   Grid.Row="1" />

                                        <Grid Grid.Row="2"
                                              Grid.ColumnSpan="2">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition />
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition  Width="Auto" />
                                                <ColumnDefinition  Width="Auto" />
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Text="Progress"
                                                       Margin="0,0,10,0"
                                                       FontSize="20"
                                                       Grid.Column="0" />
                                            <TextBlock Text="{Binding SelectedDepot.Progress}"
                                                       FontSize="20"
                                                       Grid.Column="1" />

                                            <TextBlock Text="{Binding EstimatedTrips}"
                                                       FontSize="20"
                                                       Margin="0,0,10,0"
                                                       Grid.Column="2" />

                                            <TextBlock Text="Total"
                                                       Margin="0,0,10,0"
                                                       FontSize="20"
                                                       Grid.Column="3" />
                                            <TextBlock Text="{Binding SelectedDepot.TotalRemaining}"
                                                       FontSize="20"
                                                       Margin="0,0,10,0"
                                                       Grid.Column="4" />
                                        </Grid>

                                    </Grid>

                                    <DataGrid ItemsSource="{Binding SelectedDepotResources}"
                                              Grid.Row="1"
                                              Style="{DynamicResource ConstructionResourcesDataGrid}"
                                              RowStyle="{DynamicResource NoSelectRowStyle}"
                                              CellStyle="{DynamicResource NoSelectCellNoMargin}"
                                              Foreground="{DynamicResource PrimaryForeground}"
                                              FontSize="20"
                                              IsReadOnly="True"
                                              SelectionMode="Single"
                                              SelectedItem="{Binding SelectedResource, Mode=TwoWay}"
                                              ScrollViewer.HorizontalScrollBarVisibility="Visible"
                                              ScrollViewer.VerticalScrollBarVisibility="Visible"
                                              AlternatingRowBackground="{DynamicResource RowAlternationColour}"
                                              HeadersVisibility="Column"
                                              AutoGenerateColumns="False"
                                              HorizontalAlignment="Center">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="Commodity"
                                                                MinWidth="250"
                                                                HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                                ElementStyle="{DynamicResource DataGridElementLeftMarginBody}"
                                                                Binding="{Binding LocalName}" />
                                            <DataGridTextColumn Header="Category"
                                                                MinWidth="180"
                                                                HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                                ElementStyle="{DynamicResource DataGridElementLeftMarginBody}"
                                                                Binding="{Binding Category}" />
                                            <DataGridTextColumn Header="Previously Purchased From"
                                                                MinWidth="250"
                                                                Width="*"
                                                                HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                                ElementStyle="{DynamicResource DataGridElementLeftMarginBody}"
                                                                Binding="{Binding FirstPurchase}" />
                                            <DataGridTextColumn Header="Total"
                                                                MinWidth="100"
                                                                HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                                ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                                Binding="{Binding Required}" />
                                            <DataGridTextColumn Header="Carrier Stock"
                                                                MinWidth="100"
                                                                HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                                ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                                Binding="{Binding CarrierStock}" />
                                            <DataGridTextColumn Header="Carrier Diff"
                                                                MinWidth="100"
                                                                HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                                ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                                Binding="{Binding CarrierStockDiff}" />
                                            <DataGridTextColumn Header="Delivered"
                                                                MinWidth="100"
                                                                HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                                ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                                Binding="{Binding Delivered}" />
                                            <DataGridTextColumn Header="Remaining"
                                                                MinWidth="100"
                                                                HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                                ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                                Binding="{Binding Remaining}" />
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </Grid>
                            </TabItem>
                            <TabItem Header="Shopping List">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="35" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="25" />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>

                                    <Grid Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Text="Depots"
                                                   FontSize="22"
                                                   Margin="5"
                                                   Foreground="{DynamicResource Header}" />

                                        <StackPanel Grid.Column="1"
                                                    Orientation="Horizontal">
                                            <buttons:ColonisationDiscordButton Text="{Binding DiscordButtonText}"
                                                                               Command="{Binding CreatePostCommand}"
                                                                               Height="30" />
                                            <TextBlock Text="Commodity Sorting "
                                                       VerticalAlignment="Center" />
                                            <ComboBox ItemsSource="{Binding Source={StaticResource CommodityEnum}}"
                                                      SelectedItem="{Binding ShoppingListCommoditySorting}"
                                                      Margin="5,0,10,0"
                                                      Grid.Column="2"
                                                      MinWidth="180"
                                                      FontSize="18"
                                                      HorizontalAlignment="Right"
                                                      VerticalAlignment="Center"
                                                      IsReadOnly="True"
                                                      IsSynchronizedWithCurrentItem="False" />
                                            <Button Command="{Binding OpenPopOut}"
                                                    CommandParameter="{x:Type popouts:ShoppingListPopOutVM}"
                                                    Style="{DynamicResource EliteStyleImageButton}"
                                                    Width="35"
                                                    Margin="0,0,5,0"
                                                    Padding="5"
                                                    ToolTip="Open Overlay">
                                                <Image Source="/Assets/Icons/PopOutBtn.png" />
                                            </Button>
                                        </StackPanel>
                                    </Grid>

                                    <DataGrid ItemsSource="{Binding ShoppingList.Depots}"
                                              Grid.Row="1"
                                              Margin="10"
                                              Style="{DynamicResource ConstructionResourcesDataGrid}"
                                              RowStyle="{DynamicResource NoSelectRowStyle}"
                                              CellStyle="{DynamicResource NoSelectCellNoMargin}"
                                              Foreground="{DynamicResource PrimaryForeground}"
                                              FontSize="20"
                                              IsReadOnly="True"
                                              SelectionMode="Single"
                                              ScrollViewer.HorizontalScrollBarVisibility="Visible"
                                              ScrollViewer.VerticalScrollBarVisibility="Visible"
                                              AlternatingRowBackground="{DynamicResource RowAlternationColour}"
                                              HeadersVisibility="Column"
                                              AutoGenerateColumns="False"
                                              HorizontalAlignment="Center">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="System Name"
                                                                MinWidth="250"
                                                                HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                                ElementStyle="{DynamicResource DataGridElementLeftMarginBody}"
                                                                Binding="{Binding SystemNameText}" />
                                            <DataGridTextColumn Header="Station Name"
                                                                MinWidth="250"
                                                                Width="*"
                                                                HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                                ElementStyle="{DynamicResource DataGridElementLeftMarginBody}"
                                                                Binding="{Binding StationNameSplit}" />
                                            <DataGridTemplateColumn Width="30">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <Button Command="{Binding ElementName=Root, Path=DataContext.AddShoppingListCommand}"
                                                                CommandParameter="{Binding }"
                                                                Style="{DynamicResource EliteStyleButton}"
                                                                Content="X"
                                                                Margin="2"
                                                                Width="25"
                                                                Height="25"
                                                                ToolTip="Remove From Shopping List"
                                                                FontSize="16" />
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                        </DataGrid.Columns>
                                    </DataGrid>

                                    <StackPanel Orientation="Horizontal"
                                                Grid.Row="2"
                                                Grid.Column="2"
                                                HorizontalAlignment="Right">
                                        <TextBlock Text="{Binding EstimatedTrips}"
                                                   FontSize="20"
                                                   Margin="0,0,10,0" />

                                        <TextBlock Text="{Binding ShoppingList.TotalRemaining}"
                                                   HorizontalAlignment="Right"
                                                   FontSize="20"
                                                   Margin="0,0,30,0" />
                                    </StackPanel>
                                    <DataGrid ItemsSource="{Binding ShoppingListResources}"
                                              Grid.Row="3"
                                              Margin="10"
                                              Style="{DynamicResource ConstructionResourcesDataGrid}"
                                              RowStyle="{DynamicResource NoSelectRowStyle}"
                                              CellStyle="{DynamicResource NoSelectCellNoMargin}"
                                              Foreground="{DynamicResource PrimaryForeground}"
                                              SelectedItem="{Binding SelectedResource, Mode=TwoWay}"
                                              FontSize="20"
                                              IsReadOnly="True"
                                              SelectionMode="Single"
                                              ScrollViewer.HorizontalScrollBarVisibility="Visible"
                                              ScrollViewer.VerticalScrollBarVisibility="Visible"
                                              AlternatingRowBackground="{DynamicResource RowAlternationColour}"
                                              HeadersVisibility="Column"
                                              AutoGenerateColumns="False">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="Commodity"
                                                                MinWidth="250"
                                                                HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                                ElementStyle="{DynamicResource DataGridElementLeftMarginBody}"
                                                                Binding="{Binding LocalName}" />
                                            <DataGridTextColumn Header="Category"
                                                                MinWidth="180"
                                                                HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                                ElementStyle="{DynamicResource DataGridElementLeftMarginBody}"
                                                                Binding="{Binding Category}" />
                                            <DataGridTextColumn Header="Previously Purchased From"
                                                                MinWidth="250"
                                                                Width="*"
                                                                HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                                ElementStyle="{DynamicResource DataGridElementLeftMarginBody}"
                                                                Binding="{Binding FirstPurchase}" />
                                            <DataGridTextColumn Header="Carrier Stock"
                                                                MinWidth="150"
                                                                HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                                ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                                Binding="{Binding CarrierStock}" />
                                            <DataGridTextColumn Header="Carrier Diff"
                                                                MinWidth="150"
                                                                HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                                ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                                Binding="{Binding CarrierStockDiff}" />
                                            <DataGridTextColumn Header="Remaining"
                                                                MinWidth="100"
                                                                HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                                ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                                Binding="{Binding Remaining}" />
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </Grid>
                            </TabItem>
                            <TabItem Header="Market Watchlist">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Text="Markets"
                                                   FontSize="22"
                                                   Margin="5"
                                                   Foreground="{DynamicResource Header}" />

                                        <StackPanel Grid.Column="1"
                                                    Orientation="Horizontal">
                                            <TextBlock Text="Commodity Sorting "
                                                       VerticalAlignment="Center" />
                                            <ComboBox ItemsSource="{Binding Source={StaticResource CommodityEnum}}"
                                                      SelectedItem="{Binding WatchedMarketSorting}"
                                                      Margin="5,0,10,0"
                                                      Grid.Column="2"
                                                      MinWidth="180"
                                                      FontSize="18"
                                                      HorizontalAlignment="Right"
                                                      VerticalAlignment="Center"
                                                      IsReadOnly="True"
                                                      IsSynchronizedWithCurrentItem="False" />
                                            <Button Command="{Binding OpenPopOut}"
                                                    CommandParameter="{x:Type popouts:MarketWatchListPopOutViewModel}"
                                                    Style="{DynamicResource EliteStyleImageButton}"
                                                    Width="35"
                                                    Margin="0,0,5,0"
                                                    Padding="5"
                                                    ToolTip="Open Overlay">
                                                <Image Source="/Assets/Icons/PopOutBtn.png" />
                                            </Button>
                                        </StackPanel>
                                    </Grid>

                                    <DataGrid ItemsSource="{Binding WatchedMarkets}"
                                              SelectedItem="{Binding SelectedWatchedMarket}"
                                              Grid.Row="1"
                                              Margin="10"
                                              Style="{DynamicResource ConstructionResourcesDataGrid}"
                                              RowStyle="{DynamicResource MarketWatchlistRowStyle}"
                                              CellStyle="{DynamicResource NoSelectCellNoMargin}"
                                              Foreground="{DynamicResource PrimaryForeground}"
                                              FontSize="20"
                                              IsReadOnly="True"
                                              SelectionMode="Single"
                                              ScrollViewer.HorizontalScrollBarVisibility="Visible"
                                              ScrollViewer.VerticalScrollBarVisibility="Visible"
                                              AlternatingRowBackground="{DynamicResource RowAlternationColour}"
                                              HeadersVisibility="Column"
                                              AutoGenerateColumns="False"
                                              HorizontalAlignment="Center">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="Station Name"
                                                                MinWidth="250"
                                                                Width="*"
                                                                HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                                ElementStyle="{DynamicResource DataGridElementLeftMarginBody}"
                                                                Binding="{Binding Name}" />
                                            <DataGridTemplateColumn Width="30">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <Button Command="{Binding ElementName=Root, Path=DataContext.AddRemoveWatchedMarketsCommand}"
                                                                CommandParameter="{Binding MarketId}"
                                                                Style="{DynamicResource EliteStyleButton}"
                                                                Content="X"
                                                                Margin="2"
                                                                Width="25"
                                                                Height="25"
                                                                ToolTip="Remove From Watched List"
                                                                FontSize="16" />
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                        </DataGrid.Columns>
                                    </DataGrid>

                                    <DataGrid ItemsSource="{Binding SelectedWatchedMarketCommodities}"
                                              Grid.Row="3"
                                              Margin="10"
                                              Style="{DynamicResource ConstructionResourcesDataGrid}"
                                              RowStyle="{DynamicResource NoSelectRowStyle}"
                                              CellStyle="{DynamicResource NoSelectCellNoMargin}"
                                              Foreground="{DynamicResource PrimaryForeground}"
                                              SelectedItem="{Binding SelectedResource, Mode=TwoWay}"
                                              FontSize="20"
                                              IsReadOnly="True"
                                              SelectionMode="Single"
                                              ScrollViewer.HorizontalScrollBarVisibility="Visible"
                                              ScrollViewer.VerticalScrollBarVisibility="Visible"
                                              AlternatingRowBackground="{DynamicResource RowAlternationColour}"
                                              HeadersVisibility="Column"
                                              AutoGenerateColumns="False">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="Commodity"
                                                                MinWidth="250"
                                                                HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                                ElementStyle="{DynamicResource DataGridElementLeftMarginBody}"
                                                                Binding="{Binding Name_Localised}" />
                                            <DataGridTextColumn Header="Category"
                                                                Width="*"
                                                                HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                                ElementStyle="{DynamicResource DataGridElementLeftMarginBody}"
                                                                Binding="{Binding Category_Localised}" />
                                            <DataGridTextColumn Header="Demand"
                                                                MinWidth="100"
                                                                HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                                ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                                Binding="{Binding DemandString}" />
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </Grid>
                            </TabItem>
                            <TabItem Header="Build Totals">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <colonisation:AssetSelectionMenu Command="{Binding SelectBuild}"
                                                                         IsChecked="{Binding ColonisationBuildTotals.MenuOpen, Mode=TwoWay}" />

                                        <StackPanel Orientation="Horizontal"
                                                    Grid.Column="1">
                                            <Button Style="{DynamicResource EliteStyleButton}"
                                                    Command="{Binding RemoveSelectedFromWishList}"
                                                    FontFamily="Segoe MDL2 Assets"
                                                    FontSize="18"
                                                    Width="35"
                                                    Height="35"
                                                    Content="&#xE738;"
                                                    Margin="5,0">
                                                <Button.ToolTip>
                                                    <TextBlock Text="Remove From Wishlist"
                                                               FontFamily="{StaticResource Eurostile}" />
                                                </Button.ToolTip>
                                            </Button>
                                            <Button Style="{DynamicResource EliteStyleButton}"
                                                    Command="{Binding AddSelectedToWishList}"
                                                    FontFamily="Segoe MDL2 Assets"
                                                    FontSize="18"
                                                    Width="35"
                                                    Height="35"
                                                    Content="&#xE710;"
                                                    Margin="5,0">
                                                <Button.ToolTip>
                                                    <TextBlock Text="Add To Wishlist"
                                                               FontFamily="{StaticResource Eurostile}" />
                                                </Button.ToolTip>
                                            </Button>
                                            <TextBlock Text="{Binding ColonisationBuildTotals.BuildName}"
                                                       VerticalAlignment="Center"
                                                       Margin="10,0"
                                                       Foreground="{DynamicResource Header}"
                                                       FontSize="20" />
                                        </StackPanel>
                                        <StackPanel Grid.Column="2"
                                                    Orientation="Horizontal">
                                            <buttons:ColonisationDiscordButton Text="{Binding DiscordButtonText}"
                                                                               Command="{Binding CreatePostCommand}"
                                                                               Height="30"/>
                                            <TextBlock Text="Commodity Sorting "
                                                       VerticalAlignment="Center" />
                                            <ComboBox ItemsSource="{Binding Source={StaticResource BuildSortingEnum}}"
                                                      SelectedItem="{Binding BuildItemSorting}"
                                                      Margin="5,0,10,0"
                                                      Grid.Column="2"
                                                      MinWidth="180"
                                                      FontSize="18"
                                                      HorizontalAlignment="Right"
                                                      VerticalAlignment="Center"
                                                      IsReadOnly="True"
                                                      IsSynchronizedWithCurrentItem="False" />
                                        </StackPanel>
                                    </Grid>

                                    <Grid Grid.Row="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="580" />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>

                                        <ListBox ItemsSource="{Binding ColonisationBuildTotals.AssetStats, UpdateSourceTrigger=PropertyChanged, Mode=OneWay}"
                                                 ScrollViewer.VerticalScrollBarVisibility="Visible"
                                                 ScrollViewer.HorizontalScrollBarVisibility="Visible"
                                                 AlternationCount="2"
                                                 Background="Transparent"
                                                 BorderThickness="0"
                                                 Foreground="{DynamicResource PrimaryForeground}">
                                            <ListBox.ItemContainerStyle>
                                                <Style TargetType="ListBoxItem">
                                                    <Setter Property="IsHitTestVisible"
                                                            Value="False" />
                                                    <Setter Property="HorizontalContentAlignment"
                                                            Value="Stretch" />
                                                    <Style.Triggers>
                                                        <Trigger Property="ItemsControl.AlternationIndex"
                                                                 Value="0">
                                                            <Setter Property="Background"
                                                                    Value="Transparent"></Setter>
                                                        </Trigger>
                                                        <Trigger Property="ItemsControl.AlternationIndex"
                                                                 Value="1">
                                                            <Setter Property="Background"
                                                                    Value="{DynamicResource RowAlternationColour}"></Setter>
                                                        </Trigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </ListBox.ItemContainerStyle>
                                            <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                    <Grid>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="Auto"
                                                                           MinHeight="40" />
                                                            <RowDefinition Height="40" />
                                                        </Grid.RowDefinitions>
                                                        <Grid Grid.Row="0">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition />
                                                                <ColumnDefinition Width="50" />
                                                                <ColumnDefinition Width="50" />
                                                                <ColumnDefinition Width="50" />
                                                                <ColumnDefinition Width="50" />
                                                                <ColumnDefinition Width="50" />
                                                            </Grid.ColumnDefinitions>

                                                            <StackPanel Orientation="Vertical"
                                                                        Margin="0,0,10,0">
                                                                <TextBlock Text="{Binding Type}"
                                                                           Foreground="{DynamicResource Header}" />
                                                                <TextBlock Text="{Binding SubType}"
                                                                           MaxWidth="270"
                                                                           HorizontalAlignment="Left"
                                                                           TextWrapping="Wrap"
                                                                           FontSize="15" />
                                                            </StackPanel>

                                                            <StackPanel Orientation="Vertical"
                                                                        Grid.Column="1">
                                                                <TextBlock Text="Tier"
                                                                           FontWeight="Bold"
                                                                           HorizontalAlignment="Center" />
                                                                <TextBlock Text="{Binding Tier}"
                                                                           HorizontalAlignment="Center"
                                                                           FontSize="15" />
                                                            </StackPanel>

                                                            <StackPanel Orientation="Vertical"
                                                                        Grid.Column="2">
                                                                <TextBlock Text="Pads"
                                                                           FontWeight="Bold"
                                                                           HorizontalAlignment="Center" />
                                                                <TextBlock Text="{Binding Pad}"
                                                                           HorizontalAlignment="Center"
                                                                           FontSize="15" />
                                                            </StackPanel>

                                                            <StackPanel Orientation="Vertical"
                                                                        Grid.Column="3">
                                                                <TextBlock Text="Cost"
                                                                           FontWeight="Bold"
                                                                           HorizontalAlignment="Center" />
                                                                <TextBlock Text="{Binding PointCost}"
                                                                           HorizontalAlignment="Center"
                                                                           FontSize="15" />
                                                            </StackPanel>

                                                            <StackPanel Orientation="Vertical"
                                                                        Grid.Column="4">
                                                                <TextBlock Text="Gain"
                                                                           FontWeight="Bold"
                                                                           HorizontalAlignment="Center" />
                                                                <TextBlock Text="{Binding PointGain}"
                                                                           HorizontalAlignment="Center"
                                                                           FontSize="15" />
                                                            </StackPanel>

                                                            <StackPanel Orientation="Vertical"
                                                                        Grid.Column="5">
                                                                <TextBlock Text="Score"
                                                                           FontWeight="Bold"
                                                                           HorizontalAlignment="Center" />
                                                                <TextBlock Text="{Binding Score}"
                                                                           HorizontalAlignment="Center"
                                                                           FontSize="15" />
                                                            </StackPanel>
                                                        </Grid>

                                                        <Grid Grid.Row="1">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition />
                                                                <ColumnDefinition Width="50" />
                                                                <ColumnDefinition Width="60" />
                                                                <ColumnDefinition Width="70" />
                                                                <ColumnDefinition Width="60" />
                                                                <ColumnDefinition Width="50" />
                                                                <ColumnDefinition Width="50" />
                                                                <ColumnDefinition Width="50" />
                                                            </Grid.ColumnDefinitions>

                                                            <StackPanel Orientation="Vertical"
                                                                        Margin="0,0,10,0">
                                                                <TextBlock Text="Economy"
                                                                           FontWeight="Bold"
                                                                           FontSize="16" />
                                                                <StackPanel Orientation="Horizontal">
                                                                    <Rectangle Width="10"
                                                                               Height="10"
                                                                               Margin="0,0,5,0"
                                                                               Style="{StaticResource AssetEconomyRectange}" />
                                                                    <TextBlock Text="{Binding Economy}"
                                                                               FontSize="15" />
                                                                </StackPanel>
                                                            </StackPanel>

                                                            <StackPanel Orientation="Vertical"
                                                                        Grid.Column="1">
                                                                <TextBlock Text="Pop"
                                                                           FontWeight="Bold"
                                                                           FontSize="16"
                                                                           HorizontalAlignment="Center" />
                                                                <TextBlock Text="{Binding Population, StringFormat={}{0:+#;-#;#}}"
                                                                           Foreground="{Binding Population, Converter={StaticResource IntToColour}}"
                                                                           HorizontalAlignment="Center"
                                                                           FontSize="15" />
                                                            </StackPanel>

                                                            <StackPanel Orientation="Vertical"
                                                                        Grid.Column="2">
                                                                <TextBlock Text="Max Pop"
                                                                           FontWeight="Bold"
                                                                           FontSize="16"
                                                                           HorizontalAlignment="Center" />
                                                                <TextBlock Text="{Binding MaxPopulation, StringFormat={}{0:+#;-#;#}}"
                                                                           Foreground="{Binding MaxPopulation, Converter={StaticResource IntToColour}}"
                                                                           HorizontalAlignment="Center"
                                                                           FontSize="15" />
                                                            </StackPanel>

                                                            <StackPanel Orientation="Vertical"
                                                                        Grid.Column="3">
                                                                <TextBlock Text="Security"
                                                                           FontWeight="Bold"
                                                                           FontSize="16"
                                                                           HorizontalAlignment="Center" />
                                                                <TextBlock Text="{Binding Security, StringFormat={}{0:+#;-#;#}}"
                                                                           Foreground="{Binding Security, Converter={StaticResource IntToColour}}"
                                                                           HorizontalAlignment="Center"
                                                                           FontSize="15" />
                                                            </StackPanel>

                                                            <StackPanel Orientation="Vertical"
                                                                        Grid.Column="4">
                                                                <TextBlock Text="Wealth"
                                                                           FontWeight="Bold"
                                                                           FontSize="16"
                                                                           HorizontalAlignment="Center" />
                                                                <TextBlock Text="{Binding Wealth, StringFormat={}{0:+#;-#;#}}"
                                                                           Foreground="{Binding Wealth, Converter={StaticResource IntToColour}}"
                                                                           HorizontalAlignment="Center"
                                                                           FontSize="15" />
                                                            </StackPanel>

                                                            <StackPanel Orientation="Vertical"
                                                                        Grid.Column="5">
                                                                <TextBlock Text="Tech"
                                                                           FontWeight="Bold"
                                                                           FontSize="16"
                                                                           HorizontalAlignment="Center" />
                                                                <TextBlock Text="{Binding TechLevel, StringFormat={}{0:+#;-#;#}}"
                                                                           Foreground="{Binding TechLevel, Converter={StaticResource IntToColour}}"
                                                                           HorizontalAlignment="Center"
                                                                           FontSize="15" />
                                                            </StackPanel>

                                                            <StackPanel Orientation="Vertical"
                                                                        Grid.Column="6">
                                                                <TextBlock Text="SoL"
                                                                           FontWeight="Bold"
                                                                           FontSize="16"
                                                                           HorizontalAlignment="Center" />
                                                                <TextBlock Text="{Binding StandardOfLiving, StringFormat={}{0:+#;-#;#}}"
                                                                           Foreground="{Binding StandardOfLiving, Converter={StaticResource IntToColour}}"
                                                                           HorizontalAlignment="Center"
                                                                           FontSize="15" />
                                                            </StackPanel>

                                                            <StackPanel Orientation="Vertical"
                                                                        Grid.Column="7">
                                                                <TextBlock Text="Dev"
                                                                           FontWeight="Bold"
                                                                           FontSize="16"
                                                                           HorizontalAlignment="Center" />
                                                                <TextBlock Text="{Binding Development, StringFormat={}{0:+#;-#;#}}"
                                                                           Foreground="{Binding Development, Converter={StaticResource IntToColour}}"
                                                                           HorizontalAlignment="Center"
                                                                           FontSize="15" />
                                                            </StackPanel>
                                                        </Grid>
                                                    </Grid>
                                                </DataTemplate>
                                            </ListBox.ItemTemplate>
                                        </ListBox>

                                        <DataGrid ItemsSource="{Binding ColonisationBuildTotals.Items}"
                                                  Grid.Column="1"
                                                  Style="{DynamicResource ConstructionResourcesDataGrid}"
                                                  RowStyle="{DynamicResource NoSelectRowStyle}"
                                                  CellStyle="{DynamicResource NoSelectCellNoMargin}"
                                                  Foreground="{DynamicResource PrimaryForeground}"
                                                  FontSize="20"
                                                  IsReadOnly="True"
                                                  SelectionMode="Single"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Visible"
                                                  ScrollViewer.VerticalScrollBarVisibility="Visible"
                                                  AlternatingRowBackground="{DynamicResource RowAlternationColour}"
                                                  HeadersVisibility="Column"
                                                  AutoGenerateColumns="False"
                                                  HorizontalAlignment="Center">
                                            <DataGrid.Columns>
                                                <DataGridTextColumn Header="Commodity"
                                                                    MinWidth="250"
                                                                    HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                                    ElementStyle="{DynamicResource DataGridElementLeftMarginBody}"
                                                                    Binding="{Binding Name}" />
                                                <DataGridTextColumn Header="Category"
                                                                    Width="*"
                                                                    HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                                    ElementStyle="{DynamicResource DataGridElementLeftMarginBody}"
                                                                    Binding="{Binding Category}" />
                                                <DataGridTextColumn Header="Carrier Stock"
                                                                    MinWidth="130"
                                                                    HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                                    ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                                    Binding="{Binding CarrierStock}" />
                                                <DataGridTextColumn Header="Carrier Diff"
                                                                    MinWidth="100"
                                                                    HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                                    ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                                    Binding="{Binding CarrierStockDifference}" />
                                                <DataGridTextColumn Header="Required"
                                                                    MinWidth="100"
                                                                    HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                                    ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                                    Binding="{Binding Required}" />
                                            </DataGrid.Columns>
                                        </DataGrid>
                                    </Grid>

                                    <StackPanel Orientation="Horizontal"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Margin="25,0"
                                                Grid.Row="3">
                                        <TextBlock Text="Total"
                                                   Margin="10,0"
                                                   FontSize="20"
                                                   VerticalAlignment="Center" />
                                        <TextBlock Text="{Binding ColonisationBuildTotals.Total}"
                                                   FontSize="20"
                                                   VerticalAlignment="Center" />
                                    </StackPanel>
                                </Grid>
                            </TabItem>
                            <TabItem Header="Build Wishlist">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <TextBlock Text="Build Wishlist"
                                                   FontSize="22"
                                                   Margin="5"
                                                   Foreground="{DynamicResource Header}" />

                                        <StackPanel Grid.Column="2"
                                                    Orientation="Horizontal">
                                            <buttons:ColonisationDiscordButton Text="{Binding DiscordButtonText}"
                                                                               Command="{Binding CreatePostCommand}"
                                                                               Height="30" />
                                            <TextBlock Text="Commodity Sorting "
                                                       VerticalAlignment="Center" />
                                            <ComboBox ItemsSource="{Binding Source={StaticResource BuildSortingEnum}}"
                                                      SelectedItem="{Binding BuildItemSorting}"
                                                      Margin="5,0,10,0"
                                                      Grid.Column="2"
                                                      MinWidth="180"
                                                      FontSize="18"
                                                      HorizontalAlignment="Right"
                                                      VerticalAlignment="Center"
                                                      IsReadOnly="True"
                                                      IsSynchronizedWithCurrentItem="False" />
                                        </StackPanel>
                                    </Grid>

                                    <Grid Grid.Row="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="450" />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>

                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <StackPanel Orientation="Horizontal"
                                                        HorizontalAlignment="Left"
                                                        VerticalAlignment="Center">
                                                <colonisation:AssetSelectionMenu Command="{Binding AddBuildToWishList}"
                                                                                 IsChecked="{Binding ColonisationBuildTotals.MenuOpen, Mode=TwoWay}"
                                                                                 VerticalAlignment="Center" />
                                                <TextBlock Text="Add To Wishlist"
                                                           VerticalAlignment="Center"
                                                           Margin="5,0" />
                                            </StackPanel>
                                            <DataGrid ItemsSource="{Binding ColonisationBuildTotals.WishListBuilds, Mode=OneWay}"
                                                      Style="{DynamicResource ConstructionResourcesDataGrid}"
                                                      RowStyle="{DynamicResource NoSelectRowStyle}"
                                                      CellStyle="{DynamicResource NoSelectCellNoMargin}"
                                                      Foreground="{DynamicResource PrimaryForeground}"
                                                      FontSize="20"
                                                      Grid.Row="1"
                                                      IsReadOnly="True"
                                                      SelectionMode="Single"
                                                      ScrollViewer.HorizontalScrollBarVisibility="Visible"
                                                      ScrollViewer.VerticalScrollBarVisibility="Visible"
                                                      AlternatingRowBackground="{DynamicResource RowAlternationColour}"
                                                      HeadersVisibility="Column"
                                                      AutoGenerateColumns="False"
                                                      HorizontalAlignment="Center">
                                                <DataGrid.Columns>
                                                    <DataGridTextColumn Header="Build"
                                                                        MinWidth="250"
                                                                        Width="*"
                                                                        HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                                        ElementStyle="{DynamicResource DataGridElementLeftMarginBody}"
                                                                        Binding="{Binding BuildName}" />
                                                    <DataGridTextColumn Header="Qty"
                                                                        Width="40"
                                                                        HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                                        ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                                        Binding="{Binding CountString}" />
                                                    <DataGridTemplateColumn Width="30">
                                                        <DataGridTemplateColumn.CellTemplate>
                                                            <DataTemplate>
                                                                <Button Command="{Binding ElementName=Root, Path=DataContext.RemoveBuildFromWishList}"
                                                                        CommandParameter="{Binding Build}"
                                                                        Style="{DynamicResource EliteStyleButton}"
                                                                        Content="-"
                                                                        Margin="2"
                                                                        Width="25"
                                                                        Height="25"
                                                                        FontSize="16" />
                                                            </DataTemplate>
                                                        </DataGridTemplateColumn.CellTemplate>
                                                    </DataGridTemplateColumn>
                                                    <DataGridTemplateColumn Width="30">
                                                        <DataGridTemplateColumn.CellTemplate>
                                                            <DataTemplate>
                                                                <Button Command="{Binding ElementName=Root, Path=DataContext.AddBuildToWishList}"
                                                                        CommandParameter="{Binding Build}"
                                                                        Style="{DynamicResource EliteStyleButton}"
                                                                        Content="+"
                                                                        Margin="2"
                                                                        Width="25"
                                                                        Height="25"
                                                                        FontSize="16" />
                                                            </DataTemplate>
                                                        </DataGridTemplateColumn.CellTemplate>
                                                    </DataGridTemplateColumn>
                                                </DataGrid.Columns>
                                            </DataGrid>
                                        </Grid>
                                        <DataGrid ItemsSource="{Binding ColonisationBuildTotals.WishListItems}"
                                                  Grid.Column="1"
                                                  Style="{DynamicResource ConstructionResourcesDataGrid}"
                                                  RowStyle="{DynamicResource NoSelectRowStyle}"
                                                  CellStyle="{DynamicResource NoSelectCellNoMargin}"
                                                  Foreground="{DynamicResource PrimaryForeground}"
                                                  FontSize="20"
                                                  IsReadOnly="True"
                                                  SelectionMode="Single"
                                                  ScrollViewer.HorizontalScrollBarVisibility="Visible"
                                                  ScrollViewer.VerticalScrollBarVisibility="Visible"
                                                  AlternatingRowBackground="{DynamicResource RowAlternationColour}"
                                                  HeadersVisibility="Column"
                                                  AutoGenerateColumns="False">
                                            <DataGrid.Columns>
                                                <DataGridTextColumn Header="Commodity"
                                                                    MinWidth="250"
                                                                    HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                                    ElementStyle="{DynamicResource DataGridElementLeftMarginBody}"
                                                                    Binding="{Binding Name}" />
                                                <DataGridTextColumn Header="Category"
                                                                    Width="*"
                                                                    HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                                    ElementStyle="{DynamicResource DataGridElementLeftMarginBody}"
                                                                    Binding="{Binding Category}" />
                                                <DataGridTextColumn Header="Carrier Stock"
                                                                    MinWidth="130"
                                                                    HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                                    ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                                    Binding="{Binding CarrierStock}" />
                                                <DataGridTextColumn Header="Carrier Diff"
                                                                    MinWidth="100"
                                                                    HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                                    ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                                    Binding="{Binding CarrierStockDifference}" />
                                                <DataGridTextColumn Header="Required"
                                                                    MinWidth="100"
                                                                    HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                                    ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                                    Binding="{Binding Required}" />
                                            </DataGrid.Columns>
                                        </DataGrid>
                                    </Grid>
                                    <StackPanel Orientation="Horizontal"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Margin="25,0"
                                                Grid.Row="4">
                                        <TextBlock Text="Total"
                                                   Margin="10,0"
                                                   FontSize="20"
                                                   VerticalAlignment="Center" />
                                        <TextBlock Text="{Binding ColonisationBuildTotals.WishListTotal}"
                                                   FontSize="20"
                                                   VerticalAlignment="Center" />
                                    </StackPanel>
                                </Grid>
                            </TabItem>
                            <TabItem Header="Build Stats">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>

                                    <TextBlock Text="Asset Stats"
                                               Foreground="{DynamicResource Header}"
                                               FontSize="20"
                                               Margin="0,5" />

                                    <Grid Grid.Row="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Filters"
                                                   Foreground="{DynamicResource Header}"
                                                   FontSize="18"
                                                   Margin="10,10" />

                                        <StackPanel Orientation="Horizontal"
                                                    Grid.Column="1">
                                            <CheckBox Content="Starports T1"
                                                      VerticalAlignment="Center"
                                                      Margin="0,0,10,0"
                                                      Command="{Binding AssetFilterCommand}"
                                                      CommandParameter="{x:Static colonisationModel:AssetFilter.SpaceOutpost}"
                                                      Style="{DynamicResource EliteStyleCheckBox}"
                                                      IsChecked="{Binding ColonisationBuildTotals.AssetFilter,
                                                        Converter={StaticResource AssetFilterConvertor},
                                                        ConverterParameter={x:Static colonisationModel:AssetFilter.SpaceOutpost},
                                                        Mode=OneWay}" />
                                            <CheckBox Content="Starports T2/3"
                                                      VerticalAlignment="Center"
                                                      Margin="0,0,10,0"
                                                      Command="{Binding AssetFilterCommand}"
                                                      CommandParameter="{x:Static colonisationModel:AssetFilter.Starport}"
                                                      Style="{DynamicResource EliteStyleCheckBox}"
                                                      IsChecked="{Binding ColonisationBuildTotals.AssetFilter,
                                                        Converter={StaticResource AssetFilterConvertor},
                                                        ConverterParameter={x:Static colonisationModel:AssetFilter.Starport},
                                                        Mode=OneWay}" />
                                            <CheckBox Content="Space Installations"
                                                      VerticalAlignment="Center"
                                                      Margin="0,0,10,0"
                                                      Command="{Binding AssetFilterCommand}"
                                                      CommandParameter="{x:Static colonisationModel:AssetFilter.SpaceInstallation}"
                                                      Style="{DynamicResource EliteStyleCheckBox}"
                                                      IsChecked="{Binding ColonisationBuildTotals.AssetFilter,
                                                        Converter={StaticResource AssetFilterConvertor},
                                                        ConverterParameter={x:Static colonisationModel:AssetFilter.SpaceInstallation},
                                                        Mode=OneWay}" />
                                            <CheckBox Content="Surface Outposts"
                                                      VerticalAlignment="Center"
                                                      Margin="0,0,10,0"
                                                      Command="{Binding AssetFilterCommand}"
                                                      CommandParameter="{x:Static colonisationModel:AssetFilter.SurfaceOutpost}"
                                                      Style="{DynamicResource EliteStyleCheckBox}"
                                                      IsChecked="{Binding ColonisationBuildTotals.AssetFilter,
                                                        Converter={StaticResource AssetFilterConvertor},
                                                        ConverterParameter={x:Static colonisationModel:AssetFilter.SurfaceOutpost},
                                                        Mode=OneWay}" />
                                            <CheckBox Content="Settlements"
                                                      VerticalAlignment="Center"
                                                      Margin="0,0,10,0"
                                                      Command="{Binding AssetFilterCommand}"
                                                      CommandParameter="{x:Static colonisationModel:AssetFilter.Settlement}"
                                                      Style="{DynamicResource EliteStyleCheckBox}"
                                                      IsChecked="{Binding ColonisationBuildTotals.AssetFilter,
                                                        Converter={StaticResource AssetFilterConvertor},
                                                        ConverterParameter={x:Static colonisationModel:AssetFilter.Settlement},
                                                        Mode=OneWay}" />
                                            <CheckBox Content="Hubs"
                                                      VerticalAlignment="Center"
                                                      Margin="0,0,10,0"
                                                      Command="{Binding AssetFilterCommand}"
                                                      CommandParameter="{x:Static colonisationModel:AssetFilter.Hub}"
                                                      Style="{DynamicResource EliteStyleCheckBox}"
                                                      IsChecked="{Binding ColonisationBuildTotals.AssetFilter,
                                                        Converter={StaticResource AssetFilterConvertor},
                                                        ConverterParameter={x:Static colonisationModel:AssetFilter.Hub},
                                                        Mode=OneWay}" />
                                        </StackPanel>
                                    </Grid>
                                    <DataGrid ItemsSource="{Binding ColonisationBuildTotals.AllAssetStats}"
                                              Grid.Row="2"
                                              Style="{DynamicResource ConstructionResourcesDataGrid}"
                                              RowStyle="{DynamicResource NoSelectRowStyle}"
                                              CellStyle="{DynamicResource NoSelectCellNoMargin}"
                                              Foreground="{DynamicResource PrimaryForeground}"
                                              FontSize="20"
                                              IsReadOnly="True"
                                              SelectionMode="Single"
                                              CanUserSortColumns="True"
                                              ScrollViewer.HorizontalScrollBarVisibility="Visible"
                                              ScrollViewer.VerticalScrollBarVisibility="Visible"
                                              AlternatingRowBackground="{DynamicResource RowAlternationColour}"
                                              HeadersVisibility="Column"
                                              AutoGenerateColumns="False"
                                              HorizontalAlignment="Center">
                                        <DataGrid.Columns>
                                            <DataGridTemplateColumn Header="Type"
                                                                    HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                                    SortMemberPath="Filter"
                                                                    Width="*">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <StackPanel Orientation="Vertical"
                                                                    Margin="0,0,10,0">
                                                            <TextBlock Text="{Binding Type}"
                                                                       Foreground="{DynamicResource Header}" />
                                                            <TextBlock Text="{Binding SubType}"
                                                                       MaxWidth="270"
                                                                       HorizontalAlignment="Left"
                                                                       TextWrapping="Wrap"
                                                                       FontSize="15" />
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTextColumn Header="Tier"
                                                                Width="60"
                                                                SortMemberPath="TierInt"
                                                                HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                                ElementStyle="{DynamicResource DataGridElementCenter}"
                                                                Binding="{Binding Tier}" />
                                            <DataGridTextColumn Header="Pad Size"
                                                                Width="90"
                                                                SortMemberPath="PadEnum"
                                                                HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                                ElementStyle="{DynamicResource DataGridElementCenter}"
                                                                Binding="{Binding Pad}" />
                                            <DataGridTemplateColumn Header="Cost"
                                                                    Width="60"
                                                                    SortMemberPath="CostSorting"
                                                                    HeaderStyle="{StaticResource DataGridHeaderCenter}">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <StackPanel Orientation="Horizontal"
                                                                    HorizontalAlignment="Center">
                                                            <TextBlock Text="{Binding PointCost}"
                                                                       VerticalAlignment="Center"/>
                                                            <Image Width="25"
                                                                   Height="25">
                                                                <Image.Style>
                                                                    <Style TargetType="{x:Type Image}">
                                                                        <Style.Triggers>
                                                                            <DataTrigger Binding="{Binding CostTier}"
                                                                                         Value="{x:Static colonisationModel:PointTier.None}">
                                                                                <Setter Property="Visibility"
                                                                                        Value="Hidden" />
                                                                            </DataTrigger>
                                                                            <DataTrigger Binding="{Binding CostTier}"
                                                                                         Value="{x:Static colonisationModel:PointTier.Tier2}">
                                                                                <Setter Property="Source"
                                                                                        Value="/Assets/Icons/T2Point.png" />
                                                                            </DataTrigger>
                                                                            <DataTrigger Binding="{Binding CostTier}"
                                                                                         Value="{x:Static colonisationModel:PointTier.Tier3}">
                                                                                <Setter Property="Source"
                                                                                        Value="/Assets/Icons/T3Point.png" />
                                                                                <Setter Property="Margin"
                                                                                        Value="5,0" />
                                                                            </DataTrigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </Image.Style>
                                                            </Image>
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTemplateColumn Header="Gain"
                                                                    Width="60"
                                                                    SortMemberPath="GainSorting"
                                                                    HeaderStyle="{StaticResource DataGridHeaderCenter}">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <StackPanel Orientation="Horizontal">
                                                            <TextBlock Text="{Binding PointGain}"
                                                                       VerticalAlignment="Center" />
                                                            <Image Width="25"
                                                                   Height="25">
                                                                <Image.Style>
                                                                    <Style TargetType="{x:Type Image}">
                                                                        <Style.Triggers>
                                                                            <DataTrigger Binding="{Binding GainTier}"
                                                                                         Value="{x:Static colonisationModel:PointTier.None}">
                                                                                <Setter Property="Visibility"
                                                                                        Value="Hidden" />
                                                                            </DataTrigger>
                                                                            <DataTrigger Binding="{Binding GainTier}"
                                                                                         Value="{x:Static colonisationModel:PointTier.Tier2}">
                                                                                <Setter Property="Source"
                                                                                        Value="/Assets/Icons/T2Point.png" />
                                                                            </DataTrigger>
                                                                            <DataTrigger Binding="{Binding GainTier}"
                                                                                         Value="{x:Static colonisationModel:PointTier.Tier3}">
                                                                                <Setter Property="Source"
                                                                                        Value="/Assets/Icons/T3Point.png" />
                                                                                <Setter Property="Margin"
                                                                                        Value="5,0" />
                                                                            </DataTrigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </Image.Style>
                                                            </Image>
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTemplateColumn Header="Economy"
                                                                    SortMemberPath="Economy"
                                                                    Width="100"
                                                                    HeaderStyle="{StaticResource DataGridHeaderCenter}">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <StackPanel Orientation="Horizontal">
                                                            <Rectangle Width="10"
                                                                       Height="10"
                                                                       Margin="5,0"
                                                                       HorizontalAlignment="Center"
                                                                       VerticalAlignment="Center"
                                                                       Style="{StaticResource AssetEconomyRectange}" />
                                                            <TextBlock Text="{Binding Economy}"
                                                                       Margin="0,0,5,0"
                                                                       HorizontalAlignment="Center"
                                                                       VerticalAlignment="Center"
                                                                       FontSize="15">
                                                                <TextBlock.Style>
                                                                    <Style TargetType="{x:Type TextBlock}">
                                                                        <Style.Triggers>
                                                                            <DataTrigger Binding="{Binding Economy}"
                                                                                         Value="{x:Static colonisationModel:AssetEconomy.None}">
                                                                                <Setter Property="Visibility"
                                                                                        Value="Collapsed" />
                                                                            </DataTrigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </TextBlock.Style>
                                                            </TextBlock>
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTemplateColumn Header="Pop"
                                                                    Width="60"
                                                                    SortMemberPath="Population"
                                                                    HeaderStyle="{StaticResource DataGridHeaderCenter}">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <TextBlock Text="{Binding Population, StringFormat={}{0:+#;-#;#}}"
                                                                   Foreground="{Binding Population, Converter={StaticResource IntToColour}}"
                                                                   FontSize="20"
                                                                   HorizontalAlignment="Center"
                                                                   VerticalAlignment="Center" />
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTemplateColumn Header="M Pop"
                                                                    Width="60"
                                                                    SortMemberPath="MaxPopulation"
                                                                    HeaderStyle="{StaticResource DataGridHeaderCenter}">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <TextBlock Text="{Binding MaxPopulation, StringFormat={}{0:+#;-#;#}}"
                                                                   Foreground="{Binding MaxPopulation, Converter={StaticResource IntToColour}}"
                                                                   FontSize="20"
                                                                   HorizontalAlignment="Center"
                                                                   VerticalAlignment="Center" />
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTemplateColumn Header="Sec"
                                                                    Width="60"
                                                                    SortMemberPath="Security"
                                                                    HeaderStyle="{StaticResource DataGridHeaderCenter}">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <TextBlock Text="{Binding Security, StringFormat={}{0:+#;-#;#}}"
                                                                   Foreground="{Binding Security, Converter={StaticResource IntToColour}}"
                                                                   FontSize="20"
                                                                   HorizontalAlignment="Center"
                                                                   VerticalAlignment="Center" />
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTemplateColumn Header="Wealth"
                                                                    Width="60"
                                                                    SortMemberPath="Wealth"
                                                                    HeaderStyle="{StaticResource DataGridHeaderCenter}">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <TextBlock Text="{Binding Wealth, StringFormat={}{0:+#;-#;#}}"
                                                                   Foreground="{Binding Wealth, Converter={StaticResource IntToColour}}"
                                                                   FontSize="20"
                                                                   HorizontalAlignment="Center"
                                                                   VerticalAlignment="Center" />
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTemplateColumn Header="Tech"
                                                                    Width="60"
                                                                    SortMemberPath="TechLevel"
                                                                    HeaderStyle="{StaticResource DataGridHeaderCenter}">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <TextBlock Text="{Binding TechLevel, StringFormat={}{0:+#;-#;#}}"
                                                                   Foreground="{Binding TechLevel, Converter={StaticResource IntToColour}}"
                                                                   FontSize="20"
                                                                   HorizontalAlignment="Center"
                                                                   VerticalAlignment="Center" />
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTemplateColumn Header="SoL"
                                                                    Width="60"
                                                                    SortMemberPath="StandardOfLiving"
                                                                    HeaderStyle="{StaticResource DataGridHeaderCenter}">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <TextBlock Text="{Binding StandardOfLiving, StringFormat={}{0:+#;-#;#}}"
                                                                   Foreground="{Binding StandardOfLiving, Converter={StaticResource IntToColour}}"
                                                                   FontSize="20"
                                                                   HorizontalAlignment="Center"
                                                                   VerticalAlignment="Center" />
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTemplateColumn Header="Dev"
                                                                    Width="60"
                                                                    SortMemberPath="Development"
                                                                    HeaderStyle="{StaticResource DataGridHeaderCenter}">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <TextBlock Text="{Binding Development, StringFormat={}{0:+#;-#;#}}"
                                                                   Foreground="{Binding Development, Converter={StaticResource IntToColour}}"
                                                                   FontSize="20"
                                                                   HorizontalAlignment="Center"
                                                                   VerticalAlignment="Center" />
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTextColumn Header="Score"
                                                                Width="60"
                                                                SortMemberPath="Score"
                                                                HeaderStyle="{StaticResource DataGridHeaderCenter}"
                                                                ElementStyle="{StaticResource DataGridElementCenter}"
                                                                Binding="{Binding Score}" />
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </Grid>
                            </TabItem>
                            <TabItem Header="Construction Totals">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition />
                                    </Grid.RowDefinitions>

                                    <TextBlock Text="Total volume of goods delivered to depots per system"
                                               Foreground="{DynamicResource Header}"
                                               FontSize="18"
                                               Margin="0,5" />
                                    <DataGrid ItemsSource="{Binding ConstructionTotals}"
                                              Style="{DynamicResource ConstructionResourcesDataGrid}"
                                              RowStyle="{DynamicResource NoSelectRowStyle}"
                                              CellStyle="{DynamicResource NoSelectCellNoMargin}"
                                              Foreground="{DynamicResource PrimaryForeground}"
                                              FontSize="18"
                                              Grid.Row="1"
                                              ScrollViewer.HorizontalScrollBarVisibility="Visible"
                                              ScrollViewer.VerticalScrollBarVisibility="Visible"
                                              AlternatingRowBackground="{DynamicResource RowAlternationColour}"
                                              HeadersVisibility="Column"
                                              AutoGenerateColumns="False"
                                              HorizontalAlignment="Stretch"
                                              VerticalAlignment="Stretch">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="Name"
                                                                MinWidth="250"
                                                                HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                                ElementStyle="{DynamicResource DataGridElementLeftMarginBody}"
                                                                Binding="{Binding SystemName}" />
                                            <DataGridTextColumn Header="Total"
                                                                MinWidth="100"
                                                                HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                                ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                                Binding="{Binding Total}" />
                                            <DataGridTextColumn Width="*"
                                                                HeaderStyle="{DynamicResource DataGridHeaderRight}" />
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </Grid>
                            </TabItem>
                        </TabControl>
                    </Border>

                    <GridSplitter Grid.Row="1"
                                  Height="4"
                                  Margin="5,0"
                                  Background="{DynamicResource ScrollBarLine}"
                                  HorizontalAlignment="Stretch" />

                    <Border Background="{DynamicResource CardBackground}"
                            CornerRadius="5"
                            MinHeight="180"
                            Height="Auto"
                            VerticalAlignment="Stretch"
                            Margin="5,5,5,5"
                            Grid.Row="2"
                            Padding="5">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition />
                            </Grid.RowDefinitions>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition />
                                    <RowDefinition />
                                </Grid.RowDefinitions>

                                <TextBlock Text="Station Market"
                                           FontSize="20"
                                           Grid.Row="0"
                                           Foreground="{DynamicResource Header}"
                                           Grid.ColumnSpan="2" />

                                <Button Style="{DynamicResource EliteStyleButton}"
                                        Command="{Binding AddRemoveWatchedMarketsCommand}"
                                        CommandParameter="{Binding CurrentMarket.MarketID}"
                                        Content="Watchlist Add/Remove"
                                        Width="200"
                                        Grid.Column="3"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center" />

                                <TextBlock Text="{Binding CurrentMarket.StationName}"
                                           FontSize="30"
                                           Grid.Row="1"
                                           Foreground="{DynamicResource Header}"
                                           Grid.ColumnSpan="2" />

                                <TextBlock Text="{Binding CurrentMarket.StarSystem}"
                                           Grid.ColumnSpan="2"
                                           FontSize="20"
                                           Grid.Row="2" />
                            </Grid>
                            <DataGrid ItemsSource="{Binding CurrentMarketItems}"
                                      Visibility="{Binding CurrentMarket, Converter={StaticResource NullToVis}, ConverterParameter=Hidden}"
                                      Grid.Row="1"
                                      Style="{DynamicResource ConstructionResourcesDataGrid}"
                                      RowStyle="{DynamicResource NoSelectRowStyle}"
                                      CellStyle="{DynamicResource NoSelectCellNoMargin}"
                                      Foreground="{DynamicResource PrimaryForeground}"
                                      FontSize="18"
                                      ScrollViewer.HorizontalScrollBarVisibility="Visible"
                                      ScrollViewer.VerticalScrollBarVisibility="Visible"
                                      AlternatingRowBackground="{DynamicResource RowAlternationColour}"
                                      HeadersVisibility="Column"
                                      AutoGenerateColumns="False"
                                      HorizontalAlignment="Center"
                                      VerticalAlignment="Stretch">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Commodity"
                                                        MinWidth="250"
                                                        HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                        ElementStyle="{DynamicResource DataGridElementLeftMarginBody}"
                                                        Binding="{Binding Name_Localised}" />
                                    <DataGridTextColumn Header="Category"
                                                        Width="*"
                                                        MinWidth="100"
                                                        HeaderStyle="{DynamicResource DataGridHeaderLeft}"
                                                        ElementStyle="{DynamicResource DataGridElementLeftMarginBody}"
                                                        Binding="{Binding Category_Localised}" />
                                    <DataGridTextColumn Header="Stock"
                                                        MinWidth="100"
                                                        HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                        ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                        Binding="{Binding Stock, StringFormat={}{0:N0} t}" />
                                    <DataGridTextColumn Header="Carrier Stock"
                                                        MinWidth="120"
                                                        HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                        ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                        Binding="{Binding CarrierStock}" />
                                    <DataGridTextColumn Header="Carrier Diff"
                                                        MinWidth="120"
                                                        HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                        ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                        Binding="{Binding CarrierStockDiff}" />
                                    <DataGridTextColumn Header="Required"
                                                        MinWidth="100"
                                                        HeaderStyle="{DynamicResource DataGridHeaderCenter}"
                                                        ElementStyle="{DynamicResource DataGridElementRightMargin}"
                                                        Binding="{Binding Required, StringFormat={}{0:N0} t}" />
                                </DataGrid.Columns>
                            </DataGrid>
                        </Grid>
                    </Border>
                </Grid>
            </Grid>
        </Grid>
    </busyIndicator:BusyMask>
</UserControl>
